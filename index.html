<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>اختيار البطارية المناسبة</title>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      direction: rtl;
      padding: 40px;
      background: #f9f9fb;
      color: #333;
    }

    h1 {
      text-align: center;
      color: #0065d2;
    }

    .question {
      margin-bottom: 25px;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }

    label {
      font-size: 18px;
      display: block;
      margin-bottom: 10px;
      font-weight: bold;
    }

    select {
      padding: 10px;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
      transition: 0.3s;
    }

    select:focus {
      border-color: #0065d2;
      outline: none;
    }

    .result {
      margin-top: 30px;
    }

    .battery {
      background: #ffffff;
      border: 2px solid #0065d2;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      transition: 0.3s;
    }

    .battery:hover {
      box-shadow: 0 0 15px rgba(0,101,210,0.1);
    }

    .battery strong {
      display: inline-block;
      width: 100px;
      color: #0065d2;
    }

    .battery a {
      display: inline-block;
      margin-top: 15px;
      background: #0065d2;
      color: white;
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 10px;
      transition: 0.3s;
    }

    .battery a:hover {
      background: #004a9f;
    }
  </style>
</head>
<body>
  <h1>🔋 اختر بطاريتك المناسبة</h1>
  <div id="app"></div>

  <script>
    const batteries = [
      {
        brand: "ACDelco",
        company: "Toyota",
        model: "Corolla",
        year: 2020,
        capacity: "60Ah",
        link: "https://example.com/battery/acdelco"
      },
      {
        brand: "Bosch",
        company: "Toyota",
        model: "Camry",
        year: 2021,
        capacity: "65Ah",
        link: "https://example.com/battery/bosch"
      },
      {
        brand: "Exide",
        company: "Nissan",
        model: "Altima",
        year: 2020,
        capacity: "55Ah",
        link: "https://example.com/battery/exide"
      },
      {
        brand: "Varta",
        company: "Toyota",
        model: "Corolla",
        year: 2022,
        capacity: "62Ah",
        link: "https://example.com/battery/varta"
      }
    ];

    const app = document.getElementById("app");

    const companies = [...new Set(batteries.map(b => b.company))];

    const companySelect = createSelect("اختر شركة السيارة 1️⃣", companies);
    app.appendChild(companySelect.container);

    const modelSelect = createSelect("اختر موديل السيارة 2️⃣", []);
    app.appendChild(modelSelect.container);

    const yearSelect = createSelect("3️⃣ سنة تصنيع السيارة", []);
    app.appendChild(yearSelect.container);

    const resultBox = document.createElement("div");
    resultBox.className = "result";
    app.appendChild(resultBox);

    companySelect.select.onchange = () => {
      const selectedCompany = companySelect.select.value;
      const models = [...new Set(batteries.filter(b => b.company === selectedCompany).map(b => b.model))];
      updateSelectOptions(modelSelect.select, models);
      updateSelectOptions(yearSelect.select, []);
      resultBox.innerHTML = "";
    };

    modelSelect.select.onchange = () => {
      const selectedCompany = companySelect.select.value;
      const selectedModel = modelSelect.select.value;
      const years = [...new Set(batteries.filter(b => b.company === selectedCompany && b.model === selectedModel).map(b => b.year))];
      updateSelectOptions(yearSelect.select, years);
      resultBox.innerHTML = "";
    };

    yearSelect.select.onchange = () => {
      const selectedCompany = companySelect.select.value;
      const selectedModel = modelSelect.select.value;
      const selectedYear = parseInt(yearSelect.select.value);

      const matching = batteries.filter(b =>
        b.company === selectedCompany &&
        b.model === selectedModel &&
        b.year === selectedYear
      );

      resultBox.innerHTML = "<h2>🔋 ترشيحات البطارية:</h2>";
      if (matching.length) {
        matching.forEach(b => {
          const div = document.createElement("div");
          div.className = "battery";
          div.innerHTML = `
            <div><strong>العلامة:</strong> ${b.brand}</div>
            <div><strong>السعة:</strong> ${b.capacity}</div>
            <div><strong>السنة:</strong> ${b.year}</div>
            <a href="${b.link}" target="_blank">اذهب إلى المنتج 🔗</a>
          `;
          resultBox.appendChild(div);
        });
      } else {
        resultBox.innerHTML += "<p>❌ لم يتم العثور على بطارية مناسبة.</p>";
      }
    };

    function createSelect(labelText, options) {
      const container = document.createElement("div");
      container.className = "question";

      const label = document.createElement("label");
      label.textContent = labelText;

      const select = document.createElement("select");
      const defaultOption = document.createElement("option");
      defaultOption.textContent = "اختر...";
      defaultOption.disabled = true;
      defaultOption.selected = true;
      select.appendChild(defaultOption);

      options.forEach(opt => {
        const option = document.createElement("option");
        option.value = opt;
        option.textContent = opt;
        select.appendChild(option);
      });

      container.appendChild(label);
      container.appendChild(select);

      return { container, select };
    }

    function updateSelectOptions(selectElement, options) {
      selectElement.innerHTML = "";
      const defaultOption = document.createElement("option");
      defaultOption.textContent = "اختر...";
      defaultOption.disabled = true;
      defaultOption.selected = true;
      selectElement.appendChild(defaultOption);
      options.forEach(opt => {
        const option = document.createElement("option");
        option.value = opt;
        option.textContent = opt;
        selectElement.appendChild(option);
      });
    }
  </script>
</body>
</html>
